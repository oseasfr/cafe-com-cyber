<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Popular Artigos - Café com Cyber</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --background: 0 0% 8%;
      --foreground: 0 0% 95%;
      --card: 0 0% 12%;
      --card-foreground: 0 0% 95%;
      --primary: 214 78% 55%;
      --primary-foreground: 0 0% 100%;
      --accent: 214 60% 45%;
      --border: 0 0% 25%;
      --muted-foreground: 0 0% 65%;
      --destructive: 0 84% 60%;
      --gradient-dark: linear-gradient(180deg, hsl(0 0% 8%), hsl(0 0% 5%));
      --shadow-cyber: 0 0 20px hsl(214 78% 55% / 0.3);
      --shadow-soft: 0 4px 20px hsl(0 0% 0% / 0.3);
      --radius: 0.75rem;
    }

    body {
      background: hsl(var(--background));
      color: hsl(var(--foreground));
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      max-width: 600px;
      width: 100%;
    }

    .card {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius);
      padding: 40px;
      box-shadow: var(--shadow-soft);
    }

    h1 {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 12px;
      background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--accent)));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      color: hsl(var(--muted-foreground));
      margin-bottom: 30px;
      font-size: 14px;
    }

    button {
      width: 100%;
      padding: 12px 20px;
      background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--accent)));
      color: hsl(var(--primary-foreground));
      border: none;
      border-radius: var(--radius);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: var(--shadow-cyber);
      margin-bottom: 20px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 30px hsl(214 78% 55% / 0.5);
    }

    button:active {
      transform: translateY(0);
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .log-container {
      background: hsl(0 0% 5%);
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius);
      padding: 20px;
      max-height: 400px;
      overflow-y: auto;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.6;
    }

    .log-item {
      margin-bottom: 8px;
    }

    .log-success {
      color: #4caf50;
    }

    .log-error {
      color: #ff5252;
    }

    .log-info {
      color: hsl(var(--muted-foreground));
    }

    .log-container::-webkit-scrollbar {
      width: 6px;
    }

    .log-container::-webkit-scrollbar-track {
      background: hsl(0 0% 10%);
      border-radius: 3px;
    }

    .log-container::-webkit-scrollbar-thumb {
      background: hsl(var(--primary));
      border-radius: 3px;
    }

    .log-container::-webkit-scrollbar-thumb:hover {
      background: hsl(var(--accent));
    }

    .completion-badge {
      display: inline-block;
      background: hsl(var(--primary) / 0.1);
      color: hsl(var(--primary));
      padding: 8px 16px;
      border-radius: var(--radius);
      font-size: 12px;
      font-weight: 600;
      margin-top: 10px;
      border: 1px solid hsl(var(--primary) / 0.3);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Popular Artigos</h1>
      <p class="subtitle">Carregue seus artigos no banco de dados</p>
      
      <button onclick="populate()" id="populateBtn">Adicionar Artigos</button>
      
      <div class="log-container" id="log"></div>
    </div>
  </div>

  <script>
    const API_URL = 'https://articles-ccc-api.oseasfr.workers.dev/api';

    const articles = [
      {
        id: "fundamentos-de-seguranca-em-apis-rest",
        title: "Fundamentos de Segurança em APIs REST",
        description: "Aprenda as melhores práticas para proteger suas APIs contra ataques comuns como injection, broken authentication e muito mais.",
        author: "Ana Santos",
        readTime: "8 min",
        category: "Web Security",
        icon: "Shield",
        gradient: "from-primary/20 to-accent/20",
        imageUrl: "https://seusite.com/caminho/para/imagem1.png",
        content: "# Fundamentos de Segurança em APIs REST\nA segurança em APIs REST é fundamental para proteger dados sensíveis. Aqui estão os pontos-chave:\n## Autenticação e Autorização\nUse **JWT** (JSON Web Tokens) ou **OAuth 2.0** para autenticar usuários. Certifique-se de que cada solicitação tem permissão para acessar o recurso.\n## Validação de Entrada\nSempre valide e sanitize todos os dados de entrada para evitar ataques como **SQL Injection** e **Cross-Site Scripting (XSS)**.\n## Limitação de Taxa (Rate Limiting)\nImplemente limites de requisições para prevenir ataques de negação de serviço (DDoS) e força bruta."
      },
      {
        id: "zero-trust-o-futuro-da-seguranca-corporativa",
        title: "Zero Trust: O Futuro da Segurança Corporativa",
        description: "Entenda o modelo Zero Trust e como implementar uma arquitetura de segurança baseada na filosofia 'nunca confie, sempre verifique'.",
        author: "Carlos Lima",
        readTime: "12 min",
        category: "Architecture",
        icon: "Lock",
        gradient: "from-accent/20 to-primary/20",
        imageUrl: "https://seusite.com/caminho/para/imagem2.png",
        content: "# Zero Trust: O Futuro da Segurança Corporativa\nO modelo de segurança **Zero Trust** se baseia no princípio de que nenhuma entidade, dentro ou fora da rede, deve ser automaticamente confiável.\n## Princípios Chave\n- **Verificar sempre:** Autentique e autorize cada usuário e dispositivo.\n- **Menor privilégio:** Conceda o mínimo de acesso necessário para completar uma tarefa.\n- **Segmente a rede:** Divida a rede em pequenas áreas de segurança para isolar ameaças."
      },
      {
        id: "osint-tecnicas-de-investigacao-digital",
        title: "OSINT: Técnicas de Investigação Digital",
        description: "Explore ferramentas e metodologias de Open Source Intelligence para investigações de segurança e análise de ameaças.",
        author: "Maria Silva",
        readTime: "15 min",
        category: "Intelligence",
        icon: "Eye",
        gradient: "from-primary/20 to-cyber-glow/20",
        imageUrl: "https://seusite.com/caminho/para/imagem3.png",
        content: "# OSINT: Técnicas de Investigação Digital\n**Open Source Intelligence (OSINT)** é o processo de coletar informações de fontes públicas. É uma habilidade crucial para analistas de segurança.\n## Fontes Comuns\n- Redes sociais e fóruns.\n- Registros públicos e bancos de dados de empresas.\n- Motores de busca e ferramentas de mapeamento.\n## Ferramentas Úteis\n- **Maltego:** Para visualizar conexões entre dados.\n- **Recon-ng:** Um framework de reconhecimento.\n- **Shodan:** Motor de busca para dispositivos conectados à internet."
      }
    ];

    function addLog(message, type = 'info') {
      const log = document.getElementById('log');
      const item = document.createElement('div');
      item.className = `log-item log-${type}`;
      item.textContent = message;
      log.appendChild(item);
      log.scrollTop = log.scrollHeight;
    }

    async function populate() {
      const btn = document.getElementById('populateBtn');
      btn.disabled = true;
      
      const log = document.getElementById('log');
      log.innerHTML = '';

      addLog('Iniciando...', 'info');
      addLog(`Total de artigos: ${articles.length}`, 'info');
      addLog('', 'info');

      let success = 0;
      let failed = 0;

      for (const article of articles) {
        try {
          const res = await fetch(`${API_URL}/articles`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(article),
          });

          const data = await res.json();
          if (data.success) {
            addLog(`✓ ${article.title}`, 'success');
            success++;
          } else {
            addLog(`✗ ${article.title}: ${data.error}`, 'error');
            failed++;
          }
        } catch (e) {
          addLog(`✗ ${article.title}: ${e.message}`, 'error');
          failed++;
        }
      }

      addLog('', 'info');
      addLog(`Concluído: ${success} sucesso, ${failed} erro(s)`, 'info');
      
      if (failed === 0) {
        addLog('✅ Todos os artigos foram adicionados!', 'success');
        const badge = document.createElement('div');
        badge.className = 'completion-badge';
        badge.innerHTML = '✓ Concluído com sucesso';
        document.getElementById('log').appendChild(badge);
      }

      btn.disabled = false;
    }
  </script>
</body>
</html>
